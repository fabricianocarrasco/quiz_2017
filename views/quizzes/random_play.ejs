<%var models = require("../models");%>
<h1>
    Juego Aleatorio:
</h1>

<div>
    Preguntas acertadas = <span id="score"><%= score %></span>
</div>

<form method="get" action="/quizzes/randomcheck/<%= quiz.id %>">

    <p>
        Pregunta: <b><%= quiz.question %></b>
    </p>
    <b><%= models.User.findById(quiz.AuthorId).username %></b>
    <div class="wideRow">
        <input type="text" class="itemWide" id="answer" name="answer" value="" placeholder="Respuesta" autocomplete="off"/>
        <input type="submit" class="itemNarrow" id="send" value="Comprobar">
    </div>
</form>

<h1>
    Pistas:
</h1>


<% var tips = quiz.Tips; %>
<% var quizId = quiz.id; %>
<% var quizAuthorId = quiz.AuthorId; %>

<ul>
    <% for (var i in tips) { %>
    <% var tip = tips[i]; %>

    <li>

        <% if (tip.accepted ||
                (session.user && (session.user.isAdmin || (quizAuthorId && quizAuthorId === session.user.id)))) { %>

        <%= tip.text %>

        <% } %>

        <% if (!tip.accepted &&
                (session.user && (session.user.isAdmin || (quizAuthorId && quizAuthorId === session.user.id)))) { %>

        <a href="/quizzes/<%= quizId %>/tips/<%= tip.id %>/accept?_method=PUT"><button>Aceptar</button></a>

        <% } %>

        <% if ((session.user && (session.user.isAdmin || (quizAuthorId && quizAuthorId === session.user.id)))) { %>

        <a href="/quizzes/<%= quizId %>/tips/<%= tip.id %>?_method=DELETE"><button>Borrar</button></a>

        <% } %>

    </li>
    <% } %>
</ul>
